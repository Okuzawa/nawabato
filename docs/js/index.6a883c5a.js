(function(){"use strict";var e={671:function(e,t,A){var a=A(9963),s=A(6252),n=A(2262),l=A.p+"img/rule.b7e3a9b3.png",o=(A(7658),A(3907)),c=A(4866);A(6947),A(9418);function r(e){let t=0;return e.forEach((e=>t+=e.count)),t}function i(e,t){let A=new Array(e);for(let a=0;a<e;a++)A[a]=new Array(t).fill(null);return A}function u(e,t){for(var A=[],a=0;a<e.length;a+=t)A.push(e.slice(a,a+t));return A}function d(e){const t=[...e];for(let A=t.length-1;A>0;A--){let e=Math.floor(Math.random()*(A+1));[t[A],t[e]]=[t[e],t[A]]}return t}function m(e,t){let A=[];for(let a=0;a<t;a++){A[a]=[];for(let s=0;s<t;s++)A[a][s]=e[s][t-a-1]}return A}function v(e,t,A,a){for(let s=0;s<3;s++)for(let n=0;n<3;n++)if(e.some((e=>e==a[t-1+s][A-1+n])))return!0;return!1}function g(e,t,A,a){let s=[];for(let n=0;n<3;n++)for(let l=0;l<3;l++)e.some((e=>e==a[t-1+n][A-1+l]))?s.push(!0):s.push(!1);return s.every((e=>e))}var p={getTotalCount:r,create2DArray:i,splitArray:u,shuffleArray:d,rotateArray:m,serchAround:v,serchAroundAll:g};const f={apiKey:"AIzaSyArEFrBMUMDHAYTjFJ2HhsHb__zIPYMfLc",authDomain:"turf-war-ebf17.firebaseapp.com",projectId:"turf-war-ebf17",storageBucket:"turf-war-ebf17.appspot.com",messagingSenderId:"1096461103992",appId:"1:1096461103992:web:57b6f83644c9882d8d8e8d"};c.Z.initializeApp(f);const k=c.Z.firestore();var y=(0,o.MT)({state:{stageSideLength:34,gameMainPhase:0,isLoading:!0,userId:0,currentDeck:0,tb_deckList:[],blocks:[],ms_card:[],ms_stage:[],currentStage:1,stageObj:Object,roomsDocRef:null,roomId:0,enemyIndex:0,users:[],myUserObj:Object,enemyUserObj:Object,gameDatas:Object,myActData:Object,enemyActData:Object},getters:{getBlockSrc:e=>t=>e.blocks[t],findCardById:e=>t=>e.ms_card.find((e=>e.id==t)),findCardsById:(e,t)=>e=>e.map((e=>t.findCardById(e)))},mutations:{setStageObj(e,{obj:t}){if(e.stageObj=t,"blue"==e.myUserObj.userColor){let A=p.splitArray(t.map,e.stageSideLength);A=p.rotateArray(A,e.stageSideLength),A=p.rotateArray(A,e.stageSideLength),e.stageObj.map=A.flat()}},addBlockSrc(e,{src:t}){e.blocks.push(t)},addCardList(e,{data:t}){e.ms_card.push({id:t.id,name:t.name,count:t.count,cost:t.cost,map:JSON.parse("["+t.map+"]")})},addStageList(e,{data:t}){e.ms_stage.push({id:t.id,name:t.name,map:JSON.parse("["+t.map+"]")})},createUserData(e){if(null==localStorage.getItem("user_id")){console.log("新規作成"),e.userId=Math.floor(899999*Math.random()+1e5),localStorage.setItem("user_id",e.userId);let t=[];t.push({name:"スターターデッキ",deck:[6,34,159,13,45,137,22,52,141,28,55,103,40,56,92]}),t.push({name:"デッキ1",deck:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),t.push({name:"デッキ2",deck:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),t.push({name:"デッキ3",deck:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),t.push({name:"デッキ4",deck:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),t.push({name:"デッキ5",deck:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),e.tb_deckList=t,localStorage.setItem("tb_deck",JSON.stringify(t))}else console.log("データ取得"),e.tb_deckList=JSON.parse(localStorage.getItem("tb_deck")),e.userId=JSON.parse(localStorage.getItem("user_id"))},saveDeck(e,{name:t,deck:A}){e.tb_deckList[e.currentDeck].deck=A,e.tb_deckList[e.currentDeck].name=t,localStorage.setItem("tb_deck",JSON.stringify(e.tb_deckList))},createServer(e,{roomId:t}){e.roomDocRef=k.collection("rooms").doc(String(t))},eraseBufRoom(e){let t=JSON.parse(localStorage.getItem("buf_room_id"));null==t?console.log("途中退出した部屋はありません"):(k.collection("rooms").doc(String(t)).delete(),console.log("途中退出した部屋があったため、退出処理をしました"),localStorage.removeItem("buf_room_id")),e.gameMainPhase=0}},actions:{addCardListAsync:function(e){const t="https://script.google.com/macros/s/AKfycbx1KFHoEykkjIe3Rn3LVo6_kLglJmK_KZE8uNbwfkgv3lrCQ6p3-JhFI2uADL8GcHdQ/exec";fetch(t).then((function(e){return e.json()})).then((function(t){for(let A in t)e.commit("addCardList",{data:t[A]})})).then((()=>e.state.isLoading=!1))},addStageListAsync:function(e){const t="https://script.google.com/macros/s/AKfycbxBYBbh3y1smCeFL_CPnIs1lHDUWjOXhQFejZmdnByn4jlvVJhH7L0RCIwj4VEhJQXn/exec";fetch(t).then((function(e){return e.json()})).then((function(t){for(let A in t)e.commit("addStageList",{data:t[A]})})).then((()=>e.state.stageObj=e.state.ms_stage[1]))}}}),w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAgMAAAC+UIlYAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAlQTFRFi4uLZGRkXV1d1hsf8AAAAEFJREFUeJzt10ERABAUQEEuQkijhF5ySIkC34yj2XfeAi+lP8o96IAyg9oGNQIDAAAAAAAAAAAAAN7AdUivS/tDC0jnpa8yI26VAAAAAElFTkSuQmCC",S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAFpQTFRF//93///f///L//95//8d//91//8t///j///Z//8h//9H//9B//8f//8p//9R//9N//8v//9l//9j//8x//877OwAiIgAkpIAiooA6OgA//89lJQApqYAlpYAWlyBpAAAARNJREFUeJztzsdxAzEQBdG/Igka0VvZ/NMU1wNg1d4wo0N3Av2k6s2xaqb5wlFQzeYKjoLnPyj4Cep/DfASNP8G4CNo/y3AQ9D9O4C9oP/3AGvB8B8AtoLxPwIsBdE/AtgJ4n8MsBIk/wRgI0j/KcBCkP0zwFOwXBVtmf1zQFhv3ou22YZpwG5/KNp+BwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPx3wPF0LtrpMg243u6Pon18fk0Brrfvn8L9ZgIZ/18Esv7nApn/M4Hs/6lADv9EII9/LJDLPxLI5z8K5PQfBPL69wK5/TuB/P6tQI7/RiDPfy34A/EMSQ/PQDqBAAAAAElFTkSuQmCC",b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAFpQTFRF/813//Pf/+zL/855/60d/811/7It//Xj//HZ/64h/7xH/7pB/60f/7Ep/79R/75N/7Mv/8dl/8Zj/7Qx/7c77JYAiFYAkl0AilgA6JMA/7g9lF4ApmkAll8AOftDJwAAARNJREFUeJztzsdxAzEQBdG/Igka0VvZ/NMU1wNg1d4wo0N3Av2k6s2xaqb5wlFQzeYKjoLnPyj4Cep/DfASNP8G4CNo/y3AQ9D9O4C9oP/3AGvB8B8AtoLxPwIsBdE/AtgJ4n8MsBIk/wRgI0j/KcBCkP0zwFOwXBVtmf1zQFhv3ou22YZpwG5/KNp+BwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPx3wPF0LtrpMg243u6Pon18fk0Brrfvn8L9ZgIZ/18Esv7nApn/M4Hs/6lADv9EII9/LJDLPxLI5z8K5PQfBPL69wK5/TuB/P6tQI7/RiDPfy34A/EMSQ/PQDqBAAAAAElFTkSuQmCC",h=A.p+"img/orange_fire_block.0cc1af4a.png",D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAFpQTFRFd3f/39//y8v/eXn/HR3/dXX/LS3/4+P/2dn/ISH/R0f/QUH/Hx//KSn/UVH/TU3/Ly//ZWX/Y2P/MTH/Ozv/AADsAACIAACSAACKAADoPT3/AACUAACmAACWazDxowAAARNJREFUeJztzsdxAzEQBdG/Igka0VvZ/NMU1wNg1d4wo0N3Av2k6s2xaqb5wlFQzeYKjoLnPyj4Cep/DfASNP8G4CNo/y3AQ9D9O4C9oP/3AGvB8B8AtoLxPwIsBdE/AtgJ4n8MsBIk/wRgI0j/KcBCkP0zwFOwXBVtmf1zQFhv3ou22YZpwG5/KNp+BwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPx3wPF0LtrpMg243u6Pon18fk0Brrfvn8L9ZgIZ/18Esv7nApn/M4Hs/6lADv9EII9/LJDLPxLI5z8K5PQfBPL69wK5/TuB/P6tQI7/RiDPfy34A/EMSQ/PQDqBAAAAAElFTkSuQmCC",C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAFpQTFRFd///3///y///ef//Hf//df//Lf//4///2f//If//R///Qf//H///Kf//Uf//Tf//L///Zf//Y///Mf//O///AOzsAIiIAJKSAIqKAOjoPf//AJSUAKamAJaWpW5T3AAAARNJREFUeJztzsdxAzEQBdG/Igka0VvZ/NMU1wNg1d4wo0N3Av2k6s2xaqb5wlFQzeYKjoLnPyj4Cep/DfASNP8G4CNo/y3AQ9D9O4C9oP/3AGvB8B8AtoLxPwIsBdE/AtgJ4n8MsBIk/wRgI0j/KcBCkP0zwFOwXBVtmf1zQFhv3ou22YZpwG5/KNp+BwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPx3wPF0LtrpMg243u6Pon18fk0Brrfvn8L9ZgIZ/18Esv7nApn/M4Hs/6lADv9EII9/LJDLPxLI5z8K5PQfBPL69wK5/TuB/P6tQI7/RiDPfy34A/EMSQ/PQDqBAAAAAElFTkSuQmCC",B=A.p+"img/sky_fire_block.603aca15.png",P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQMAAAD58POIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAZQTFRFcHBwnJyc7OyvsAAAACJJREFUeJxjYBgkgPE/ChgVGBUYFRgVGBUYFRgVoIHAIAEAZOcaq2ZoT28AAAAASUVORK5CYII=",U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQMAAAD58POIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAAZSURBVHicY2AYBaNgFIyCUTAKRsEooC8AAAiAAAFVtmT4AAAAAElFTkSuQmCC",I="data:image/png;base64,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",L="data:image/png;base64,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",_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAFRQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAUzEAAAAAAAAAf0wA3oQA/5gAr2gAJhcA5okAn18ADwkAyXgAGxAA14AAAAAAAAAAz3sA34UASCsAAAAAAAAAH5xEFAAAABx0Uk5TAHCAIP+sNv/k8P//////////////KCH///9x5TFmeUwAAAH5SURBVHic7ZrtjoIwEEVBxlWxCPiBK7z/e25BQUppJZtOhsR7fu0mp+RaCi2TiSIAAADSxJuOOPFrCZcXUc/Wo/9sictrA+x23Z97Z+jk0AksXkTpUaljlp7codu4pzRj8doAqiMvSscI7ZdFrhSHl74DKHW+EM3MWkJ0uaoRIT0jgLqWtL9ZAw5UnpVBQM8MoIqZSdMTVqgJ4bxJgFyvnMr0K71e8umFw3mTAPp/is0BMRlCaG8aICPamAM2RJl94WDeNMB9bsCvfeFg3jSAetgDdvZ1w3mrCyB+C8QXoX5sanNA7Xq8wnhrexFJv4r15tHYm0czt8mE8qztuLL8dtLsbTaUl67iQHLXz+uSIxSL1x1KH4/ujNjMzNeTqukEFm/Zsfy28Lj9Dy+qnx8ItTPuKzSX59cAAACAb4WtJvjBe8FYE/R6Q1zGmqDP6+GsCfq8kc92BPd5Paw1QY83wFoT9Hg9vB+ibq+H+VPc6Q0w1wSd3gBzOcbpjQdwFqSc3mgAa0nO6a0pgPgtEF6EzDVBpzcg/iISfxUz1wQ93njS+GqCHu+N9IGEtya45EjGWxP0eW8Ya4KLjuURY01wwc8HAAAAvhH0E0rUBNFPiH5C9BM6A6CfUL6ZTbydTzyA+C0QX4ToJ0Q/IfoJ53z0E7agnxAAAAAjf85V2GSjhZRNAAAAAElFTkSuQmCC",F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAFRQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFNTAAAAAAAAAH9/AN7eAP//AK+vACYmAObmAJ+fAA8PAMnJABsbANfXAAAAAAAAAM/PAN/fAEhIAAAAAAAAS6cXpwAAABx0Uk5TAHCAIP+sNv/k8P//////////////KCH///9x5TFmeUwAAAH5SURBVHic7ZrtjoIwEEVBxlWxCPiBK7z/e25BQUppJZtOhsR7fu0mp+RaCi2TiSIAAADSxJuOOPFrCZcXUc/Wo/9sictrA+x23Z97Z+jk0AksXkTpUaljlp7codu4pzRj8doAqiMvSscI7ZdFrhSHl74DKHW+EM3MWkJ0uaoRIT0jgLqWtL9ZAw5UnpVBQM8MoIqZSdMTVqgJ4bxJgFyvnMr0K71e8umFw3mTAPp/is0BMRlCaG8aICPamAM2RJl94WDeNMB9bsCvfeFg3jSAetgDdvZ1w3mrCyB+C8QXoX5sanNA7Xq8wnhrexFJv4r15tHYm0czt8mE8qztuLL8dtLsbTaUl67iQHLXz+uSIxSL1x1KH4/ujNjMzNeTqukEFm/Zsfy28Lj9Dy+qnx8ItTPuKzSX59cAAACAb4WtJvjBe8FYE/R6Q1zGmqDP6+GsCfq8kc92BPd5Paw1QY83wFoT9Hg9vB+ibq+H+VPc6Q0w1wSd3gBzOcbpjQdwFqSc3mgAa0nO6a0pgPgtEF6EzDVBpzcg/iISfxUz1wQ93njS+GqCHu+N9IGEtya45EjGWxP0eW8Ya4KLjuURY01wwc8HAAAAvhH0E0rUBNFPiH5C9BM6A6CfUL6ZTbydTzyA+C0QX4ToJ0Q/IfoJ53z0E7agnxAAAAAjf85V2GSjhZRNAAAAAElFTkSuQmCC",z="data:image/png;base64,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",O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAFFQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPz8/b29vAAAAv7+/////Dw8PHx8f7+/vT09PAAAAAAAAAAAAAAAAAAAAEBAQICAgUFBQQEBAcHBwFXWHxQAAABt0Uk5TADBff+//nyD//xD///////+AoFBg8P//////EdNqdAAAAehJREFUeJztmttugzAQRJ1wSQhuCaQ0l///0C4EjCG21QdPHalznqJwQCtjG2u0ShFCCCG7fZbtd+m8vBjJy0PIPpQoTxUzeeb3s6JAeVLAsaqO4+/y5NZP5XgZ46laj9Qfwx3uGwb/E+UpPdGc5e/W5bdy4dygPFOA1nJH7pg5h8HXGuVZBTQyat3rDZ2MV2M/OK5nFaDrYVW8IOul1iuienYBWgbnZQfZyZ96Q0xvVYCsisv2hi9ZL9sHx/RWBVSOeStztto+OKb3XgUkfwWpJ6Esm37rK9W7llc8z96Ivn0bx3W9wUT1rAJuUrBr65SSb/aD43rLx+gW+njcGpRnPscyXq4BmwatuKI8OZDcH4/7eELofAeIbryM8ZYjWe8crydtX6A8Nf3su/AhskN5sjNc2vbym2N0Io8QQggh/5RU2eETXCYY9maAmWDQm4BmggHPAM0EA94MNhP0ezPgTNDrGcCZoNczgDNBrzeDjmN8ngEdSPk8AzqS83nvU0DyV5B8EqIzQa9nAGeCXs8AzgS93gI2E/R7C9BMMOAZoJlgwLMAZoJBbwGXCYY9G2aChBBCCPlT2E84w37Cgv2E7CdkP+EbNLMlb+dLXkDyV5B6ErKfkP2E7Cd06wPsJxxgdkgIIQTED/O8sbdN0QJmAAAAAElFTkSuQmCC",j=A(3577);const H={class:"board-table"},N=["src","onClick"],x=["src","onClick"],E=["src","onClick"],Q=["src","onClick"],T=["src","onClick"],R=["src","onClick"],M=["src","onClick"],X=["src","onClick"],G=["src","onClick"];function V(e,t,A,a,n,l){return(0,s.wg)(),(0,s.iD)("table",H,[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.board,((e,t,A)=>((0,s.wg)(),(0,s.iD)("tr",{key:A},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,A,a)=>((0,s.wg)(),(0,s.iD)("td",{key:a},[!0===l.isHide&&!0===l.isGray&&1===e?((0,s.wg)(),(0,s.iD)("img",{key:0,src:this.$store.getters.getBlockSrc(13),onClick:e=>l.pickTable(t*this.$store.state.stageSideLength+A)},null,8,N)):!0===l.isHide&&!0===l.isGray&&2===e?((0,s.wg)(),(0,s.iD)("img",{key:1,src:this.$store.getters.getBlockSrc(13),onClick:e=>l.pickTable(t*this.$store.state.stageSideLength+A)},null,8,x)):!0===l.isHide&&!0===l.isGray&&3===e?((0,s.wg)(),(0,s.iD)("img",{key:2,src:this.$store.getters.getBlockSrc(14),onClick:e=>l.pickTable(t*this.$store.state.stageSideLength+A)},null,8,E)):!0===l.isHide&&!0===l.isGray&&4===e?((0,s.wg)(),(0,s.iD)("img",{key:3,src:this.$store.getters.getBlockSrc(14),onClick:e=>l.pickTable(t*this.$store.state.stageSideLength+A)},null,8,Q)):!0===l.isHide&&!1===l.isGray&&1===e?((0,s.wg)(),(0,s.iD)("img",{key:4,src:this.$store.getters.getBlockSrc(e+8),onClick:e=>l.pickTable(t*this.$store.state.stageSideLength+A)},null,8,T)):!0===l.isHide&&!1===l.isGray&&2===e?((0,s.wg)(),(0,s.iD)("img",{key:5,src:this.$store.getters.getBlockSrc(e+8),onClick:e=>l.pickTable(t*this.$store.state.stageSideLength+A)},null,8,R)):!0===l.isHide&&!1===l.isGray&&3===e?((0,s.wg)(),(0,s.iD)("img",{key:6,src:this.$store.getters.getBlockSrc(e+8),onClick:e=>l.pickTable(t*this.$store.state.stageSideLength+A)},null,8,M)):!0===l.isHide&&!1===l.isGray&&4===e?((0,s.wg)(),(0,s.iD)("img",{key:7,src:this.$store.getters.getBlockSrc(e+8),onClick:e=>l.pickTable(t*this.$store.state.stageSideLength+A)},null,8,X)):((0,s.wg)(),(0,s.iD)("img",{key:8,src:this.$store.getters.getBlockSrc(e),onClick:e=>l.pickTable(t*this.$store.state.stageSideLength+A)},null,8,G))])))),128))])))),128))])])}var J={name:"BlockTable",props:{contents:Array,selectCard:Array,hide:Boolean,gray:Boolean},methods:{update(e){this.board=e},pickTable(e){this.$emit("pick",this.cardMap,e,-3,-3)}},computed:{board:{get:function(){return this.contents}},cardMap:{get:function(){return this.selectCard}},isHide:{get:function(){return this.hide}},isGray:{get:function(){return this.gray}}}},K=A(3744);const W=(0,K.Z)(J,[["render",V],["__scopeId","data-v-3478c868"]]);var Z=W;const q={class:"users"},Y={class:"card border-secondary",style:{"max-width":"15rem"}},$={class:"card-header"},ee={class:"card-body text-secondary"},te={class:"card-title"},Ae={class:"card-text"},ae={key:0,class:"dropdown"},se={class:"btn btn-secondary btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},ne={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},le=["onClick"],oe=(0,s._)("p",null,"|部屋番号|",-1),ce={key:0},re={class:"card border-secondary",style:{"max-width":"15rem"}},ie={class:"card-header"},ue={class:"card-body text-secondary"},de={class:"card-title"},me={class:"card-text"},ve={key:1},ge=(0,s._)("p",null,"対戦相手がいません",-1),pe=[ge];var fe={__name:"LobbyView",setup(e){y.state.currentDeck=0;const t=()=>{let e=y.state.users;y.state.roomDocRef.onSnapshot((t=>{e.length=0;let a=t.get("users");null!=a?(y.commit("setStageObj",{obj:t.get("stage")}),a.forEach((t=>e.push(t))),y.state.myUserObj=a[1-y.state.enemyIndex],y.state.gameDatas=t.get("gameDatas"),2==e.length&&(y.state.enemyUserObj=a[y.state.enemyIndex],A("準備OK"))):y.commit("eraseBufRoom")}))};t();const A=e=>{y.state.users.every((t=>t.userStatus==e))&&(y.state.gameMainPhase=2)},a=()=>{"準備中"==y.state.myUserObj.userStatus?l("準備OK"):"準備OK"==y.state.myUserObj.userStatus&&l("準備中")},l=e=>{y.state.roomDocRef.get().then((t=>{let A=t.get("users");A.forEach((t=>{t.userId==y.state.userId&&(t.userStatus=e)})),y.state.roomDocRef.update({users:A})}))},o=e=>{y.state.currentStage=e,y.state.stageObj=y.state.ms_stage[y.state.currentStage],y.state.roomDocRef.update({stage:y.state.stageObj})};return(e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",q,[(0,s._)("div",Y,[(0,s._)("div",$,(0,j.zw)((0,n.SU)(y).state.myUserObj.userColor),1),(0,s._)("div",ee,[(0,s._)("h5",te,(0,j.zw)((0,n.SU)(y).state.myUserObj.userName),1),(0,s._)("p",Ae,(0,j.zw)((0,n.SU)(y).state.myUserObj.userStatus),1),"yellow"==(0,n.SU)(y).state.myUserObj.userColor?((0,s.wg)(),(0,s.iD)("div",ae,[(0,s._)("button",se,(0,j.zw)((0,n.SU)(y).state.stageObj.name),1),(0,s._)("ul",ne,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,n.SU)(y).state.ms_stage,((e,t,A)=>((0,s.wg)(),(0,s.iD)("li",{key:A},[e.id>0?((0,s.wg)(),(0,s.iD)("a",{key:0,class:"dropdown-item",onClick:e=>o(t)},(0,j.zw)(e.name),9,le)):(0,s.kq)("",!0)])))),128))])])):(0,s.kq)("",!0)])]),(0,s._)("div",null,[oe,(0,s._)("h3",null,(0,j.zw)((0,n.SU)(y).state.roomId),1)]),2==(0,n.SU)(y).state.users.length?((0,s.wg)(),(0,s.iD)("div",ce,[(0,s._)("div",re,[(0,s._)("div",ie,(0,j.zw)((0,n.SU)(y).state.enemyUserObj.userColor),1),(0,s._)("div",ue,[(0,s._)("h5",de,(0,j.zw)((0,n.SU)(y).state.enemyUserObj.userName),1),(0,s._)("p",me,(0,j.zw)((0,n.SU)(y).state.enemyUserObj.userStatus),1)])])])):((0,s.wg)(),(0,s.iD)("div",ve,pe))]),(0,s._)("div",null,[(0,s._)("p",null,(0,j.zw)((0,n.SU)(y).state.stageObj.name),1),(0,s.Wm)(Z,{class:"stagePreview pointerNone",contents:(0,n.SU)(p).splitArray((0,n.SU)(y).state.stageObj.map,(0,n.SU)(y).state.stageSideLength)},null,8,["contents"])]),(0,s._)("button",{onClick:a},(0,j.zw)((0,n.SU)(y).state.myUserObj.userStatus),1),(0,s._)("button",{onClick:t[0]||(t[0]=e=>(0,n.SU)(y).commit("eraseBufRoom"))},"退出")],64))}};const ke=fe;var ye=ke;const we={class:"home"},Se={key:0},be={key:1},he={style:{color:"red"}};var De={__name:"HomeView",setup(e){const t=(0,n.iH)(1),A=(0,n.iH)(""),l=(0,n.iH)(""),o=(0,n.iH)(""),c=()=>{if(A.value="",""==l.value)return void(A.value="名前を入力してください");o.value=i(),y.state.myUserObj={userId:y.state.userId,userName:l.value,userStatus:"準備中",userColor:"yellow"},y.state.myActData={turn:0,type:"",card:[],virtualStage:[]},y.state.gameDatas={[y.state.userId]:y.state.myActData};const e={users:[y.state.myUserObj]};y.commit("createServer",{roomId:o.value}),y.state.roomDocRef.set(e),y.state.stageObj=y.state.ms_stage[y.state.currentStage],y.state.roomDocRef.update({stage:y.state.stageObj}),y.state.roomDocRef.update({gameDatas:y.state.gameDatas}),y.state.enemyIndex=1,u()},r=()=>{A.value="",""!=l.value?""!=o.value?(y.commit("createServer",{roomId:o.value}),y.state.enemyIndex=0,y.state.roomDocRef.get().then((e=>{if(e.exists){let t=e.get("users");if(2>t.length){y.state.myUserObj={userId:y.state.userId,userName:l.value,userStatus:"準備中",userColor:"blue"},t.push(y.state.myUserObj),y.state.myActData={turn:0,type:"",cardId:[],virtualStage:[]};let A=e.get("gameDatas");y.state.gameDatas={...A,[y.state.userId]:y.state.myActData},A=y.state.gameDatas,y.state.roomDocRef.update({users:t}),y.state.roomDocRef.update({gameDatas:A}),u()}else A.value="その部屋は満室です"}else A.value="その部屋は存在しません"}))):A.value="部屋番号を入力してください":A.value="名前を入力してください"},i=()=>{const e=Math.floor(89999*Math.random()+1e4);return e},u=()=>{y.state.gameMainPhase=1,y.state.roomId=o.value,localStorage.setItem("buf_room_id",JSON.stringify(o.value))};return(e,n)=>((0,s.wg)(),(0,s.iD)("div",we,[(0,s._)("div",null,[(0,s.Uk)(" 名前: "),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>l.value=e),type:"text",placeholder:"名前を入力"},null,512),[[a.nr,l.value]])]),(0,s.wy)((0,s._)("input",{type:"radio","onUpdate:modelValue":n[1]||(n[1]=e=>t.value=e),value:"1"},null,512),[[a.G2,t.value]]),(0,s.Uk)("新しく部屋を作る "),(0,s.wy)((0,s._)("input",{type:"radio","onUpdate:modelValue":n[2]||(n[2]=e=>t.value=e),value:"2"},null,512),[[a.G2,t.value]]),(0,s.Uk)("友達の部屋に入る "),1==t.value?((0,s.wg)(),(0,s.iD)("div",Se,[(0,s._)("input",{type:"button",value:"部屋を作る",onClick:c})])):(0,s.kq)("",!0),2==t.value?((0,s.wg)(),(0,s.iD)("div",be,[(0,s.Uk)(" 部屋番号: "),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>o.value=e),type:"text"},null,512),[[a.nr,o.value]]),(0,s._)("input",{type:"button",value:"入室",onClick:r})])):(0,s.kq)("",!0),(0,s._)("div",he,(0,j.zw)(A.value),1)]))}};const Ce=De;var Be=Ce;const Pe={class:"deckList"},Ue={class:"deList"},Ie=["onClick"];function Le(e,t,A,a,n,l){const o=(0,s.up)("Deck");return(0,s.wg)(),(0,s.iD)("div",Pe,[(0,s._)("h4",null,(0,j.zw)(this.$store.state.tb_deckList[this.$store.state.currentDeck].name)+" マス合計："+(0,j.zw)(n.totalCount),1),(0,s._)("div",Ue,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.$store.state.tb_deckList,((e,t,A)=>((0,s.wg)(),(0,s.iD)("div",{class:"deName",key:A},[(0,s._)("button",{class:"btn btn-outline-secondary",onClick:e=>l.selectDeck(t)},[(0,s._)("p",null,(0,j.zw)(e.name),1)],8,Ie)])))),128))]),(0,s.Wm)(o,{deck:n.myDeck},null,8,["deck"])])])}const _e={class:"CardItem"},Fe={class:"name"},ze={class:"count"},Oe=(0,s._)("p",{class:"sp"},"消費SP",-1),je={class:"cost"},He={key:1,class:"card-item"},Ne=(0,s._)("h1",null,"⊕",-1),xe=[Ne],Ee={key:2,class:"isPass"},Qe=(0,s._)("h1",null,"パス",-1),Te=[Qe];function Re(e,t,A,a,n,l){const o=(0,s.up)("BlockTable");return(0,s.wg)(),(0,s.iD)("div",_e,[0!=A.id?((0,s.wg)(),(0,s.iD)("button",{key:0,class:(0,j.C_)(["card-item btn btn-outline-secondary",{active:A.select.select,disabled:A.isDisabled,gaming:A.isSp}]),onClick:t[0]||(t[0]=t=>{l.OnClick(),e.$emit("clickEvent")})},[(0,s.Wm)(o,{BlockTable:"",contents:l.cardMap,class:"cardMap"},null,8,["contents"]),(0,s._)("p",Fe,(0,j.zw)(A.name),1),(0,s._)("div",ze,[(0,s._)("p",null,(0,j.zw)(A.count),1)]),(0,s._)("div",null,[Oe,(0,s._)("p",je,(0,j.zw)(A.cost),1)])],2)):((0,s.wg)(),(0,s.iD)("div",He,xe)),A.isPass?((0,s.wg)(),(0,s.iD)("div",Ee,Te)):(0,s.kq)("",!0)])}var Me={name:"CardItem",components:{BlockTable:Z},props:{id:Number,name:String,count:Number,cost:Number,map:Array,block:String,sp_block:String,isActiv:{default:!0},isDisabled:{default:!1},select:{default:!1},clickEvent:Function,isPass:Boolean,isSp:Boolean},data(){return{enabled:!0,isSelect:!1}},computed:{cardMap:{get:function(){return p.splitArray(this.map,8)}}},mounted(){0!=this.id&&(this.enabled=this.isActiv.enabled,this.select.select!=this.isSelect&&(this.isSelect=this.select.select))},methods:{OnClick:function(){this.enabled&&(this.isSelect?this.isSelect=!1:this.isSelect=!0)}}};const Xe=(0,K.Z)(Me,[["render",Re]]);var Ge=Xe;const Ve={class:"container"};var Je={__name:"Deck",props:{deck:Array},setup(e){const t=e;return(e,A)=>((0,s.wg)(),(0,s.iD)("div",Ve,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.deck,((e,t,A)=>((0,s.wg)(),(0,s.iD)("div",{key:A},[(0,s.Wm)(Ge,{class:"none",id:e.id,name:e.name,count:e.count,cost:e.cost,map:e.map,block:(0,n.SU)(y).getters.getBlockSrc(1),sp_block:(0,n.SU)(y).getters.getBlockSrc(2)},null,8,["id","name","count","cost","map","block","sp_block"])])))),128))]))}};const Ke=(0,K.Z)(Je,[["__scopeId","data-v-434bb096"]]);var We=Ke,Ze={name:"CardListView",components:{Deck:We},data(){return{totalCount:0,myDeck:[]}},methods:{loadDeck:function(){let e=this.$store.state.tb_deckList[this.$store.state.currentDeck].deck;this.myDeck=this.$store.getters.findCardsById(e),this.totalCount=p.getTotalCount(this.myDeck)},selectDeck:function(e){this.$store.state.currentDeck=e,this.loadDeck()}},created(){this.loadDeck()}};const qe=(0,K.Z)(Ze,[["render",Le],["__scopeId","data-v-69b9f09e"]]);var Ye=qe;const $e=e=>((0,s.dD)("data-v-64918167"),e=e(),(0,s.Cn)(),e),et={class:"post"},tt=$e((()=>(0,s._)("label",null,"デッキ名",-1))),At={class:"edit"},at={key:0},st={key:1};function nt(e,t,A,n,l,o){const c=(0,s.up)("DeckInfo"),r=(0,s.up)("CardList");return(0,s.wg)(),(0,s.iD)("div",et,[(0,s._)("div",null,[tt,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.deckName=e)},null,512),[[a.nr,l.deckName]])]),(0,s._)("div",At,[(0,s._)("h4",null,"マス合計:"+(0,j.zw)(l.totalCount),1),1==l.editType?((0,s.wg)(),(0,s.iD)("div",at,[(0,s.Wm)(c,{deck:l.myDeck,onPick:o.pickUp,class:"deck-list"},null,8,["deck","onPick"]),(0,s._)("button",{type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.saveDeck&&o.saveDeck(...e))},"保存")])):(0,s.kq)("",!0),2==l.editType?((0,s.wg)(),(0,s.iD)("div",st,[(0,s.Wm)(r,{myDeck:l.myDeck,class:"card-list",onChange:o.changeCard},null,8,["myDeck","onChange"]),(0,s._)("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=e=>l.editType=1)},"キャンセル")])):(0,s.kq)("",!0)])])}const lt={class:"container"};function ot(e,t,A,a,n,l){const o=(0,s.up)("CardItem");return(0,s.wg)(),(0,s.iD)("div",lt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.$store.state.ms_card,((e,t,A)=>((0,s.wg)(),(0,s.iD)("div",{key:A},[(0,s.Wm)(o,{id:e.id,name:e.name,count:e.count,cost:e.cost,map:e.map,block:this.$store.getters.getBlockSrc(1),sp_block:this.$store.getters.getBlockSrc(2),onClick:t=>l.change(e.id),select:{select:-1!=this.myDeck.indexOf(e)}},null,8,["id","name","count","cost","map","block","sp_block","onClick","select"])])))),128))])}var ct={name:"CardListView",components:{CardItem:Ge},props:{myDeck:Array},methods:{change:function(e){this.$emit("change",e)}}};const rt=(0,K.Z)(ct,[["render",ot],["__scopeId","data-v-46a0e1b9"]]);var it=rt;const ut={class:"container"};function dt(e,t,A,a,n,l){const o=(0,s.up)("CardItem");return(0,s.wg)(),(0,s.iD)("div",ut,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.deck,((e,t,A)=>((0,s.wg)(),(0,s.iD)("div",{key:A},[(0,s.Wm)(o,{id:e.id,name:e.name,count:e.count,cost:e.cost,map:e.map,block:this.$store.state.blocks[1],sp_block:this.$store.state.blocks[2],onClick:e=>l.pickCard(t)},null,8,["id","name","count","cost","map","block","sp_block","onClick"])])))),128))])}var mt={name:"CardListView",components:{CardItem:Ge},props:{deck:Array},methods:{pickCard:function(e){this.$emit("pick",e)}}};const vt=(0,K.Z)(mt,[["render",dt],["__scopeId","data-v-710352fb"]]);var gt=vt,pt={components:{CardList:it,DeckInfo:gt},props:{clickEvent:Function},data(){return{selectIndex:0,totalCount:0,myDeck:[],deckName:"",editType:1}},methods:{pickUp:function(e){this.selectIndex=e,this.editType=2},changeCard:function(e){let t=this.$store.getters.findCardById(e);0!=e&&-1!=this.myDeck.indexOf(t)||(this.myDeck[this.selectIndex]=t,this.editType=1,this.totalCount=p.getTotalCount(this.myDeck))},loadDeck:function(){let e=this.$store.state.tb_deckList[this.$store.state.currentDeck].deck;this.myDeck=this.$store.getters.findCardsById(e),this.totalCount=p.getTotalCount(this.myDeck)},saveDeck:function(){this.clickEvent();let e=[];this.myDeck.forEach((t=>{e.push(t.id)})),this.$store.commit("saveDeck",{name:this.deckName,deck:e})}},created(){this.loadDeck(),this.deckName=this.$store.state.tb_deckList[this.$store.state.currentDeck].name}};const ft=(0,K.Z)(pt,[["render",nt],["__scopeId","data-v-64918167"]]);var kt=ft;const yt=e=>((0,s.dD)("data-v-473c59a3"),e=e(),(0,s.Cn)(),e),wt={id:"overlay"},St={id:"content"},bt={class:"modal-header"},ht={key:0,class:"modal-title"},Dt={key:1,class:"modal-title"},Ct={class:"modal-body"},Bt={key:0},Pt=yt((()=>(0,s._)("p",null,"読み込み中",-1))),Ut=[Pt],It={key:1,id:"top-list"},Lt={class:"modal-footer"},_t=yt((()=>(0,s._)("p",null,"編集へ",-1))),Ft=[_t],zt=yt((()=>(0,s._)("p",null,"デッキ一覧へ",-1))),Ot=[zt];var jt={__name:"DeckManagerView",setup(e){const t=(0,n.iH)(0),A=(0,n.iH)(!1),l=()=>{t.value=1,A.value=!0},o=()=>{t.value=0,A.value=!1},c=()=>{localStorage.removeItem("user_id"),localStorage.removeItem("tb_deck")};return(e,r)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("button",{onClick:l},"デッキ変更"),(0,s._)("button",{onClick:c},"データ削除"),(0,s.wy)((0,s._)("div",wt,[(0,s._)("div",St,[(0,s._)("div",bt,[1==t.value?((0,s.wg)(),(0,s.iD)("h5",ht,"デッキ一覧")):(0,s.kq)("",!0),2==t.value?((0,s.wg)(),(0,s.iD)("h5",Dt,"デッキ編集")):(0,s.kq)("",!0),(0,s._)("button",{type:"button",class:"btn-close",onClick:o})]),(0,s._)("div",Ct,[(0,n.SU)(y).state.isLoading?((0,s.wg)(),(0,s.iD)("div",Bt,Ut)):((0,s.wg)(),(0,s.iD)("div",It,[1==t.value?((0,s.wg)(),(0,s.j4)(Ye,{key:0})):(0,s.kq)("",!0),2==t.value?((0,s.wg)(),(0,s.j4)(kt,{key:1,clickEvent:l})):(0,s.kq)("",!0)]))]),(0,s._)("div",Lt,[1==t.value?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-primary transitionBtn",onClick:r[0]||(r[0]=e=>t.value=2)},Ft)):(0,s.kq)("",!0),2==t.value?((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"btn btn-primary transitionBtn",onClick:r[1]||(r[1]=e=>t.value=1)},Ot)):(0,s.kq)("",!0)])])],512),[[a.F8,A.value]])],64))}};const Ht=(0,K.Z)(jt,[["__scopeId","data-v-473c59a3"]]);var Nt=Ht;const xt={class:"deckList"},Et={class:"deList"},Qt=["onClick"];function Tt(e,t,A,a,n,l){const o=(0,s.up)("Deck");return(0,s.wg)(),(0,s.iD)("div",xt,[(0,s._)("h4",null,(0,j.zw)(this.$store.state.tb_deckList[this.$store.state.currentDeck].name)+" マス合計："+(0,j.zw)(n.totalCount),1),(0,s._)("div",Et,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.$store.state.tb_deckList,((e,t,A)=>((0,s.wg)(),(0,s.iD)("div",{class:"deName",key:A},[(0,s._)("button",{class:(0,j.C_)(["btn btn-outline-secondary",{disabled:e.deck.some((e=>0==e))}]),onClick:e=>l.selectDeck(t)},[(0,s._)("p",null,(0,j.zw)(e.name),1)],10,Qt)])))),128))]),(0,s.Wm)(o,{deck:n.myDeck},null,8,["deck"])])])}var Rt={name:"CardListView",components:{Deck:We},data(){return{totalCount:0,myDeck:[]}},methods:{loadDeck:function(){let e=this.$store.state.tb_deckList[this.$store.state.currentDeck].deck;this.myDeck=this.$store.getters.findCardsById(e),this.totalCount=p.getTotalCount(this.myDeck)},selectDeck:function(e){this.$store.state.currentDeck=e,this.loadDeck()}},created(){this.loadDeck()}};const Mt=(0,K.Z)(Rt,[["render",Tt],["__scopeId","data-v-4e06863f"]]);var Xt=Mt;const Gt=e=>((0,s.dD)("data-v-3b014564"),e=e(),(0,s.Cn)(),e),Vt={class:"deckSelect"},Jt={id:"overlay"},Kt={id:"content"},Wt=Gt((()=>(0,s._)("h5",{class:"modal-title"},"デッキ一覧",-1))),Zt={class:"modal-body"},qt={key:0},Yt=Gt((()=>(0,s._)("p",null,"読み込み中",-1))),$t=[Yt],eA={key:1,id:"top-list"};var tA={__name:"DeckSelectView",setup(e){const t=(0,n.iH)(!1),A=()=>{t.value=!0},l=()=>{t.value=!1};return(e,o)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Vt,[(0,s._)("label",null,"選択中のデッキ ： "+(0,j.zw)((0,n.SU)(y).state.tb_deckList[(0,n.SU)(y).state.currentDeck].name),1),(0,s._)("button",{onClick:A},"デッキ変更")]),(0,s.wy)((0,s._)("div",Jt,[(0,s._)("div",Kt,[(0,s._)("div",{class:"modal-header"},[Wt,(0,s._)("button",{type:"button",class:"btn-close",onClick:l})]),(0,s._)("div",Zt,[(0,n.SU)(y).state.isLoading?((0,s.wg)(),(0,s.iD)("div",qt,$t)):((0,s.wg)(),(0,s.iD)("div",eA,[(0,s.Wm)(Xt)]))])])],512),[[a.F8,t.value]])],64))}};const AA=(0,K.Z)(tA,[["__scopeId","data-v-3b014564"]]);var aA=AA;const sA=[1,2],nA=[3,4];function lA(e,t){return t.map(((A,a)=>nA.some((t=>t==e[a]))&&sA.some((e=>e==A))||8==A?e[a]:t[a]))}function oA(e,t){return e.map(((e,A)=>8==e&&8!=t[A]?t[A]:8!=e&&8==t[A]?e:nA.some((t=>t==e))&&nA.some((e=>e==t[A]))==nA.some((t=>t==e))||sA.some((t=>t==e))&&sA.some((e=>e==t[A]))==sA.some((t=>t==e))?7:e>t[A]?e:e<t[A]?t[A]:e))}function cA(e,t){return t.filter((t=>e.some((e=>e==t)))).length}function rA(e,t,A){const a=p.splitArray(e,y.state.stageSideLength);return e.map(((e,s)=>{const n=Math.floor(s/y.state.stageSideLength),l=s%y.state.stageSideLength;return e==t.sp?p.serchAroundAll([1,2,3,4,5,6,7,8],n,l,a)?t.fireSp:e:e==A.sp&&p.serchAroundAll([1,2,3,4,5,6,7,8],n,l,a)?A.fireSp:e}))}function iA(e){return"blue"==e?{normal:2,sp:4,fireSp:6}:{normal:1,sp:3,fireSp:5}}function uA(e){return e.map((e=>{let t=e.map.map((e=>0!=e?e+1:e));return{...e,map:t}}))}function dA(e){return e.map((e=>({...e})))}var mA={setBlock:iA,replaceToBlue:uA,replaceToYellow:dA,mergeCard:oA,mergeStage:lA,countPoint:cA,putFireToBlock:rA};const vA=e=>((0,s.dD)("data-v-17fb5a77"),e=e(),(0,s.Cn)(),e),gA={id:"overlay"},pA={id:"content"},fA={class:"modal-body"},kA={id:"top-list"},yA={class:"container"},wA=vA((()=>(0,s._)("p",null,"閉じる",-1))),SA=[wA];var bA={__name:"GameDeck",props:{deck:Array,usedCard:Array},setup(e){const t=e,A=(0,n.iH)(!1),l=()=>{A.value=!0},o=()=>{A.value=!1};return(e,c)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("button",{onClick:l},"デッキ確認"),(0,s.wy)((0,s._)("div",gA,[(0,s._)("div",pA,[(0,s._)("div",fA,[(0,s._)("div",kA,[(0,s._)("div",yA,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.deck,((e,A,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a},[(0,s.Wm)(Ge,{class:"none",id:e.id,name:e.name,count:e.count,cost:e.cost,map:e.map,block:(0,n.SU)(y).getters.getBlockSrc(1),sp_block:(0,n.SU)(y).getters.getBlockSrc(2),select:{select:0<=t.usedCard.indexOf(e)}},null,8,["id","name","count","cost","map","block","sp_block","select"])])))),128))])])]),(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{class:"btn btn-secondary transitionBtn",onClick:o},SA)])])],512),[[a.F8,A.value]])],64))}};const hA=(0,K.Z)(bA,[["__scopeId","data-v-17fb5a77"]]);var DA=hA;const CA={class:"container"};var BA={__name:"GameHand",props:{deck:Array,canPlay:Array},emits:["pick"],setup(e,{expose:t,emit:A}){const l=e,o=(0,s.Fl)((()=>l.canPlay)),c=(0,s.Fl)((()=>r.value));let r=(0,n.iH)([]),i=(0,n.iH)(0);const u=(e=0,t=4)=>{r.value.push(l.deck[e]),t--,e++,t>0&&setTimeout((()=>u(e,t)),500)},d=e=>{r.value=e},m=e=>{i.value=e,A("pick",e)};return t({firestDrawCard:u,updata:d}),(e,t)=>((0,s.wg)(),(0,s.iD)("div",CA,[(0,s.Wm)(a.W3,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,n.SU)(c),((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s.Wm)(Ge,{id:e.id,name:e.name,count:e.count,cost:e.cost,map:e.map,block:(0,n.SU)(y).state.blocks[1],sp_block:(0,n.SU)(y).state.blocks[2],onClick:e=>m(t),select:{select:!(0<=(0,n.SU)(o).indexOf(e))}},null,8,["id","name","count","cost","map","block","sp_block","onClick","select"])])))),128))])),_:1})]))}};const PA=(0,K.Z)(BA,[["__scopeId","data-v-97725700"]]);var UA=PA,IA={__name:"CardFlip",props:{card:Array,isFaceUp:Boolean},setup(e){const t=e;return(e,A)=>((0,s.wg)(),(0,s.j4)(a.uT,{mode:"out-in"},{default:(0,s.w5)((()=>[t.isFaceUp?(0,s.WI)(e.$slots,"face",{key:0}):(0,s.WI)(e.$slots,"back",{key:1})])),_:3}))}};const LA=(0,K.Z)(IA,[["__scopeId","data-v-bb885f56"]]);var _A=LA;const FA=e=>((0,s.dD)("data-v-4fda586b"),e=e(),(0,s.Cn)(),e),zA={class:"sleeveBody"},OA=FA((()=>(0,s._)("p",null,"ナワバト",-1))),jA=[OA];function HA(e,t){return(0,s.wg)(),(0,s.iD)("div",zA,jA)}const NA={},xA=(0,K.Z)(NA,[["render",HA],["__scopeId","data-v-4fda586b"]]);var EA=xA;const QA=e=>((0,s.dD)("data-v-6dcca86f"),e=e(),(0,s.Cn)(),e),TA={id:"overlay"},RA={id:"content"},MA=QA((()=>(0,s._)("div",{class:"modal-body"},[(0,s._)("div",{id:"top-list"},[(0,s._)("div",{class:"container"}," 手札のカードを引き直しますか？ ")])],-1))),XA=QA((()=>(0,s._)("p",null,"そのまま",-1))),GA=[XA],VA=QA((()=>(0,s._)("p",null,"引き直す",-1))),JA=[VA],KA={key:0},WA={key:1},ZA=QA((()=>(0,s._)("div",null,[(0,s._)("h3",null,"結果")],-1))),qA={class:"controller"},YA={class:"container"},$A={class:"stage"},ea={key:0,class:"panel"},ta=QA((()=>(0,s._)("h1",{style:{color:"white"}},"どのカードを捨てる？",-1))),Aa=[ta],aa={key:1,class:"panel"},sa=QA((()=>(0,s._)("h1",{style:{color:"white"}},"相手の行動を待っています...",-1))),na=[sa],la={class:"playerData"},oa={key:0},ca={key:1},ra={key:0},ia={key:1};var ua={__name:"GameView",setup(e){const t=(0,n.iH)(),A=mA.setBlock(y.state.myUserObj.userColor),l=mA.setBlock(y.state.enemyUserObj.userColor),o=(0,n.iH)(!1),c=(0,n.iH)(!1),r=(0,n.iH)(!0),i=(0,n.iH)([]);let u=[],d=(0,n.iH)(0),m=(0,n.iH)(y.state.stageObj.map),v=(0,n.iH)(y.state.ms_stage[0].map),g=(0,n.iH)(0),f=(0,n.iH)(y.state.ms_card[0]),k=(0,n.iH)(y.state.ms_card[0]),w=(0,n.iH)(!0),S=(0,n.iH)(798),b=(0,n.iH)([]),h=(0,n.iH)([]),D=(0,n.iH)([]),C=(0,n.iH)(""),B=(0,n.iH)("");const P=(0,n.iH)(1),U=(0,n.iH)(1),I=(0,n.iH)(1),L=(0,n.iH)(1),_=(0,n.iH)(0),F=(0,n.iH)(0),z=(0,n.iH)(0),O=(0,n.iH)(0);let H=0,N=0;function x(){Ae(),ae()}function E(){o.value=!1,d.value++,$("play")}function Q(){h.value.length=0,t.value.updata(h.value),ee(""),setTimeout((()=>{ae(),t.value.updata(h.value),ee("normal")}),1e3)}function T(){0!=f.value.id&&("pass"==C.value||w.value)&&"play"==B.value&&(r.value=!1,$("waitting"),te())}function R(){if("pass"==C.value)return;let e=p.rotateArray(p.splitArray(f.value.map,8),8);f.value.map=e.flat(),X(p.splitArray(f.value.map,8),S.value,-3,-3)}function M(e){"play"==B.value&&(g.value=e,-1!=D.value.indexOf(h.value[e])&&(f.value=h.value[e],"pass"!=C.value&&X(p.splitArray(f.value.map,8),S.value,-3,-3)))}function X(e,t,a=0,s=0){if("play"!=B.value)return;let n=p.splitArray(y.state.ms_stage[0].map,y.state.stageSideLength);S.value=t;let o=t+a+s*y.state.stageSideLength;const c=Math.floor(o/y.state.stageSideLength),r=o%y.state.stageSideLength;for(let A=0;A<8;A++)for(let t=0;t<8;t++)0!=e[A][t]&&(n[A+c][t+r]=e[A][t]);v.value=n.flat();const i=p.splitArray(m.value,y.state.stageSideLength);if(w.value=Y(e,c,r,i),w.value){let e=m.value;e=mA.mergeStage(e,v.value),I.value=mA.countPoint([A.normal,A.sp,A.fireSp],e),L.value=mA.countPoint([l.normal,l.sp,l.fireSp],e)}else I.value=P.value,L.value=U.value}x(),(0,s.bv)((()=>{t.value.firestDrawCard(),setTimeout((()=>{o.value=!0,ee("normal")}),2200)})),(0,s.YP)(C,(e=>{switch(D.value=[],e){case"normal":f.value=y.state.ms_card[0],q(h.value),X(p.splitArray(f.value.map,8),S.value,-3,-3);break;case"sp":f.value=y.state.ms_card[0],q(h.value),X(p.splitArray(f.value.map,8),S.value,-3,-3);break;case"pass":f.value=y.state.ms_card[0],D.value=h.value.map((e=>e)),X(p.splitArray(f.value.map,8),S.value,-3,-3);break;default:break}})),(0,s.YP)((()=>y.state.gameDatas),(e=>{y.state.enemyActData=e[y.state.enemyUserObj.userId],y.state.myActData.turn==y.state.enemyActData.turn&&(k.value=y.state.enemyActData.card,$("show"),V())}));const G=function(e){return new Promise((function(t){setTimeout(t,1e3*e)}))};function V(){r.value=!0,c.value=!0,I.value=P.value,L.value=U.value,"sp"==y.state.myActData.type&&(H-=f.value.cost),"sp"==y.state.enemyActData.type&&(N-=k.value.cost),W(),G(2).then((()=>(m.value=mA.putFireToBlock(m.value,A,l),G(1)))).then((()=>("pass"==y.state.myActData.type&&H++,"pass"==y.state.enemyActData.type&&N++,z.value=mA.countPoint([A.fireSp],m.value)+H,O.value=mA.countPoint([l.fireSp],m.value)+N,_.value=mA.countPoint([A.normal,A.sp,A.fireSp],m.value)-P.value,F.value=mA.countPoint([l.normal,l.sp,l.fireSp],m.value)-U.value,G(1)))).then((()=>(_.value=0,F.value=0,P.value=mA.countPoint([A.normal,A.sp,A.fireSp],m.value),U.value=mA.countPoint([l.normal,l.sp,l.fireSp],m.value),I.value=P.value,L.value=U.value,d.value++,G(1)))).then((()=>{d.value>12?K():J()}))}function J(){c.value=!1,$("play"),C.value="",se()}function K(){$("gameEnd")}function W(){v.value=y.state.ms_stage[0].map;let e=p.splitArray(y.state.enemyActData.virtualStage,y.state.stageSideLength);e=p.rotateArray(e,y.state.stageSideLength),e=p.rotateArray(e,y.state.stageSideLength);let t=y.state.myActData.virtualStage,A=e.flat(),a=0,s=0;if(f.value.count<k.value.count?a++:f.value.count>k.value.count&&a--,a==s){let e=mA.mergeCard(t,A);m.value=mA.mergeStage(m.value,e)}else a>s?(m.value=mA.mergeStage(m.value,A),setTimeout((()=>{m.value=mA.mergeStage(m.value,t)}),1e3)):a<s&&(m.value=mA.mergeStage(m.value,t),setTimeout((()=>{m.value=mA.mergeStage(m.value,A)}),1e3))}function q(e){let t=p.splitArray(m.value,y.state.stageSideLength);D.value=e.map((e=>{if("sp"==C.value&&e.cost>z.value)return;let A=p.splitArray(e.map,8);for(let a=0;a<y.state.stageSideLength-7;a++)for(let s=0;s<y.state.stageSideLength-7;s++)for(let n=0;n<4;n++){if(Y(A,a,s,t))return e;A=p.rotateArray(A,8)}}))}function Y(e,t,a,s){let n=[];for(let l=0;l<8;l++)for(let o=0;o<8;o++)if(0!=e[l][o])if("sp"==C.value){if(s[l+t][o+a]>2)return!1;n.push(p.serchAround([A.sp,A.fireSp],l+t,o+a,s))}else{if(s[l+t][o+a]>0)return!1;n.push(p.serchAround([A.normal,A.sp,A.fireSp],l+t,o+a,s))}return n.some((e=>e))}function $(e){B.value=e}function ee(e){C.value==e&&(e="normal"),C.value=e}function te(){y.state.myActData={turn:d.value,type:C.value,card:f.value,virtualStage:v.value},y.state.roomDocRef.get().then((e=>{let t=e.get("gameDatas");t={...t,[y.state.userId]:y.state.myActData},y.state.roomDocRef.update({gameDatas:t})}))}function Ae(){let e=y.state.tb_deckList[y.state.currentDeck].deck,t=y.getters.findCardsById(e);"blue"==y.state.myUserObj.userColor?i.value=mA.replaceToBlue(t):i.value=mA.replaceToYellow(t)}function ae(){u=p.shuffleArray(i.value),b.value=[];for(let e=0;e<4;e++){let e=u.shift();h.value.push(e),b.value.push(e)}}function se(){let e=u.shift();b.value.push(e),h.value.splice(g.value,1,e),t.value.updata(h.value),setTimeout((()=>ee("normal")),100)}return(e,A)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.wy)((0,s._)("div",TA,[(0,s._)("div",RA,[MA,(0,s._)("div",null,[(0,s._)("button",{type:"button",class:"btn btn-secondary transitionBtn",onClick:E},GA),(0,s._)("button",{type:"button",class:"btn btn-secondary transitionBtn",onClick:A[0]||(A[0]=e=>{E(),Q()})},JA)])])],512),[[a.F8,o.value]]),(0,n.SU)(d)>0&&"gameEnd"!=(0,n.SU)(B)?((0,s.wg)(),(0,s.iD)("div",KA,[(0,s._)("h2",null,"残り"+(0,j.zw)(13-(0,n.SU)(d))+"ターン",1)])):(0,s.kq)("",!0),"gameEnd"==(0,n.SU)(B)?((0,s.wg)(),(0,s.iD)("div",WA,[ZA,(0,s._)("div",null,[(0,s._)("h2",null,(0,j.zw)((0,n.SU)(y).state.myUserObj.userName)+":"+(0,j.zw)(P.value)+" VS "+(0,j.zw)((0,n.SU)(y).state.enemyUserObj.userName)+":"+(0,j.zw)(U.value),1)])])):(0,s.kq)("",!0),(0,s._)("div",qA,[(0,s.Wm)(UA,{class:"hand",ref_key:"useHand",ref:t,deck:(0,n.SU)(h),canPlay:(0,n.SU)(D),onPick:M},null,8,["deck","canPlay"]),"play"==(0,n.SU)(B)?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:A[1]||(A[1]=e=>ee("pass"))},"パス")):(0,s.kq)("",!0),"play"==(0,n.SU)(B)?((0,s.wg)(),(0,s.iD)("button",{key:1,class:(0,j.C_)({gaming:"sp"==(0,n.SU)(C)}),onClick:A[2]||(A[2]=e=>ee("sp"))},"SP発動",2)):(0,s.kq)("",!0),"play"==(0,n.SU)(B)?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:R},"回転")):(0,s.kq)("",!0),"gameEnd"==(0,n.SU)(B)?((0,s.wg)(),(0,s.iD)("button",{key:3,onClick:A[3]||(A[3]=e=>(0,n.SU)(y).commit("eraseBufRoom"))},"退室する")):(0,s.kq)("",!0),(0,s.Wm)(DA,{deck:i.value,usedCard:(0,n.SU)(b)},null,8,["deck","usedCard"])]),(0,s._)("div",YA,[(0,s._)("div",$A,[(0,s._)("div",null,[(0,s.Wm)(Z,{class:"viewStage",contents:(0,n.SU)(p).splitArray((0,n.SU)(m),(0,n.SU)(y).state.stageSideLength)},null,8,["contents"]),(0,s.Wm)(Z,{class:"virtualStage",hide:!0,gray:!(0,n.SU)(w),contents:(0,n.SU)(p).splitArray((0,n.SU)(v),(0,n.SU)(y).state.stageSideLength),selectCard:(0,n.SU)(p).splitArray((0,n.SU)(f).map,8),onPick:X},null,8,["gray","contents","selectCard"]),"pass"==(0,n.SU)(C)&&"play"==(0,n.SU)(B)?((0,s.wg)(),(0,s.iD)("div",ea,Aa)):(0,s.kq)("",!0),"waitting"==(0,n.SU)(B)?((0,s.wg)(),(0,s.iD)("div",aa,na)):(0,s.kq)("",!0)])]),(0,s._)("div",la,[(0,s.Wm)(_A,{class:"enemyCard",isFaceUp:c.value},{face:(0,s.w5)((()=>[(0,s.Wm)(Ge,{id:(0,n.SU)(k).id,name:(0,n.SU)(k).name,count:(0,n.SU)(k).count,cost:(0,n.SU)(k).cost,map:(0,n.SU)(k).map,isPass:"pass"==(0,n.SU)(y).state.enemyActData.type,isSp:"sp"==(0,n.SU)(y).state.enemyActData.type},null,8,["id","name","count","cost","map","isPass","isSp"])])),back:(0,s.w5)((()=>[(0,s.Wm)(EA)])),_:1},8,["isFaceUp"]),(0,s._)("div",{class:(0,j.C_)(["enemyData","yellow"===(0,n.SU)(y).state.enemyUserObj.userColor?"yellow":"blue"])},[(0,s._)("p",null,(0,j.zw)((0,n.SU)(y).state.enemyUserObj.userName)+" : sp"+(0,j.zw)(O.value),1),0!=F.value?((0,s.wg)(),(0,s.iD)("h4",oa,(0,j.zw)(F.value?"+":" ")+" "+(0,j.zw)(F.value),1)):(0,s.kq)("",!0),(0,s._)("h1",null,(0,j.zw)(U.value),1),L.value!=U.value?((0,s.wg)(),(0,s.iD)("h3",ca,"↪"+(0,j.zw)(L.value),1)):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,j.C_)(["myData","yellow"===(0,n.SU)(y).state.myUserObj.userColor?"yellow":"blue"])},[0!=_.value?((0,s.wg)(),(0,s.iD)("h4",ra,(0,j.zw)(_.value?"+":" ")+" "+(0,j.zw)(_.value),1)):(0,s.kq)("",!0),(0,s._)("h1",null,(0,j.zw)(P.value),1),I.value!=P.value?((0,s.wg)(),(0,s.iD)("h3",ia,"↪"+(0,j.zw)(I.value),1)):(0,s.kq)("",!0),(0,s._)("p",null,(0,j.zw)((0,n.SU)(y).state.myUserObj.userName)+" : sp"+(0,j.zw)(z.value),1)],2),(0,s.Wm)(_A,{isFaceUp:r.value},{face:(0,s.w5)((()=>[(0,s.Wm)(Ge,{onClick:T,id:(0,n.SU)(f).id,name:(0,n.SU)(f).name,count:(0,n.SU)(f).count,cost:(0,n.SU)(f).cost,map:(0,n.SU)(f).map,isPass:"pass"==(0,n.SU)(C),isSp:"sp"==(0,n.SU)(C)},null,8,["id","name","count","cost","map","isPass","isSp"])])),back:(0,s.w5)((()=>[(0,s.Wm)(EA)])),_:1},8,["isFaceUp"])])])],64))}};const da=(0,K.Z)(ua,[["__scopeId","data-v-6dcca86f"]]);var ma=da;const va={key:0},ga=(0,s._)("h2",null,"ナワバトラー",-1),pa=(0,s._)("div",null,[(0,s._)("img",{id:"rule",src:l})],-1),fa={key:1},ka=(0,s._)("h2",null,"ロビー",-1),ya={key:2};var wa={__name:"App",setup(e){function t(){y.commit("addBlockSrc",{src:w}),y.commit("addBlockSrc",{src:S}),y.commit("addBlockSrc",{src:D}),y.commit("addBlockSrc",{src:b}),y.commit("addBlockSrc",{src:C}),y.commit("addBlockSrc",{src:h}),y.commit("addBlockSrc",{src:B}),y.commit("addBlockSrc",{src:P}),y.commit("addBlockSrc",{src:U}),y.commit("addBlockSrc",{src:I}),y.commit("addBlockSrc",{src:L}),y.commit("addBlockSrc",{src:_}),y.commit("addBlockSrc",{src:F}),y.commit("addBlockSrc",{src:z}),y.commit("addBlockSrc",{src:O}),y.dispatch("addCardListAsync"),y.dispatch("addStageListAsync"),y.commit("createUserData"),y.commit("eraseBufRoom")}return t(),(e,t)=>0==(0,n.SU)(y).state.gameMainPhase?((0,s.wg)(),(0,s.iD)("div",va,[ga,(0,s.Wm)(Be),(0,s.Wm)(Nt),pa])):1==(0,n.SU)(y).state.gameMainPhase?((0,s.wg)(),(0,s.iD)("div",fa,[ka,(0,s.Wm)(ye),(0,s.Wm)(aA)])):2==(0,n.SU)(y).state.gameMainPhase?((0,s.wg)(),(0,s.iD)("div",ya,[(0,s.Wm)(ma)])):(0,s.kq)("",!0)}};const Sa=wa;var ba=Sa;A(8702);(0,a.ri)(ba).use(y).mount("#app")}},t={};function A(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,A),n.exports}A.m=e,function(){var e=[];A.O=function(t,a,s,n){if(!a){var l=1/0;for(i=0;i<e.length;i++){a=e[i][0],s=e[i][1],n=e[i][2];for(var o=!0,c=0;c<a.length;c++)(!1&n||l>=n)&&Object.keys(A.O).every((function(e){return A.O[e](a[c])}))?a.splice(c--,1):(o=!1,n<l&&(l=n));if(o){e.splice(i--,1);var r=s();void 0!==r&&(t=r)}}return t}n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[a,s,n]}}(),function(){A.d=function(e,t){for(var a in t)A.o(t,a)&&!A.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){A.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){A.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){A.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){A.p=""}(),function(){var e={826:0};A.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,n,l=a[0],o=a[1],c=a[2],r=0;if(l.some((function(t){return 0!==e[t]}))){for(s in o)A.o(o,s)&&(A.m[s]=o[s]);if(c)var i=c(A)}for(t&&t(a);r<l.length;r++)n=l[r],A.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return A.O(i)},a=self["webpackChunknawabato"]=self["webpackChunknawabato"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=A.O(void 0,[998],(function(){return A(671)}));a=A.O(a)})();
//# sourceMappingURL=index.6a883c5a.js.map